{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _flux = require('flux');\n\nvar _StateFunctions = require('./utils/StateFunctions');\n\nvar StateFunctions = _interopRequireWildcard(_StateFunctions);\n\nvar _functions = require('./functions');\n\nvar fn = _interopRequireWildcard(_functions);\n\nvar _store = require('./store');\n\nvar store = _interopRequireWildcard(_store);\n\nvar _AltUtils = require('./utils/AltUtils');\n\nvar utils = _interopRequireWildcard(_AltUtils);\n\nvar _actions = require('./actions');\n\nvar _actions2 = _interopRequireDefault(_actions);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj['default'] = obj;\n    return newObj;\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n/* global window */\n\n\nvar Alt = function () {\n  function Alt() {\n    var config = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    _classCallCheck(this, Alt);\n\n    this.config = config;\n    this.serialize = config.serialize || JSON.stringify;\n    this.deserialize = config.deserialize || JSON.parse;\n    this.dispatcher = config.dispatcher || new _flux.Dispatcher();\n\n    this.batchingFunction = config.batchingFunction || function (callback) {\n      return callback();\n    };\n\n    this.actions = {\n      global: {}\n    };\n    this.stores = {};\n    this.storeTransforms = config.storeTransforms || [];\n    this.trapAsync = false;\n    this._actionsRegistry = {};\n    this._initSnapshot = {};\n    this._lastSnapshot = {};\n  }\n\n  Alt.prototype.dispatch = function () {\n    function dispatch(action, data, details) {\n      var _this = this;\n\n      this.batchingFunction(function () {\n        var id = Math.random().toString(18).substr(2, 16); // support straight dispatching of FSA-style actions\n\n        if (action.hasOwnProperty('type') && action.hasOwnProperty('payload')) {\n          var fsaDetails = {\n            id: action.type,\n            namespace: action.type,\n            name: action.type\n          };\n          return _this.dispatcher.dispatch(utils.fsa(id, action.type, action.payload, fsaDetails));\n        }\n\n        if (action.id && action.dispatch) {\n          return utils.dispatch(id, action, data, _this);\n        }\n\n        return _this.dispatcher.dispatch(utils.fsa(id, action, data, details));\n      });\n    }\n\n    return dispatch;\n  }();\n\n  Alt.prototype.createUnsavedStore = function () {\n    function createUnsavedStore(StoreModel) {\n      var key = StoreModel.displayName || '';\n      store.createStoreConfig(this.config, StoreModel);\n      var Store = store.transformStore(this.storeTransforms, StoreModel);\n\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      return fn.isFunction(Store) ? store.createStoreFromClass.apply(store, [this, Store, key].concat(args)) : store.createStoreFromObject(this, Store, key);\n    }\n\n    return createUnsavedStore;\n  }();\n\n  Alt.prototype.createStore = function () {\n    function createStore(StoreModel, iden) {\n      var key = iden || StoreModel.displayName || StoreModel.name || '';\n      store.createStoreConfig(this.config, StoreModel);\n      var Store = store.transformStore(this.storeTransforms, StoreModel);\n      /* istanbul ignore next */\n\n      if (module.hot) delete this.stores[key];\n\n      if (this.stores[key] || !key) {\n        if (this.stores[key]) {\n          utils.warn('A store named ' + String(key) + ' already exists, double check your store ' + 'names or pass in your own custom identifier for each store');\n        } else {\n          utils.warn('Store name was not specified');\n        }\n\n        key = utils.uid(this.stores, key);\n      }\n\n      for (var _len2 = arguments.length, args = Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n        args[_key2 - 2] = arguments[_key2];\n      }\n\n      var storeInstance = fn.isFunction(Store) ? store.createStoreFromClass.apply(store, [this, Store, key].concat(args)) : store.createStoreFromObject(this, Store, key);\n      this.stores[key] = storeInstance;\n      StateFunctions.saveInitialSnapshot(this, key);\n      return storeInstance;\n    }\n\n    return createStore;\n  }();\n\n  Alt.prototype.generateActions = function () {\n    function generateActions() {\n      var actions = {\n        name: 'global'\n      };\n\n      for (var _len3 = arguments.length, actionNames = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        actionNames[_key3] = arguments[_key3];\n      }\n\n      return this.createActions(actionNames.reduce(function (obj, action) {\n        obj[action] = utils.dispatchIdentity;\n        return obj;\n      }, actions));\n    }\n\n    return generateActions;\n  }();\n\n  Alt.prototype.createAction = function () {\n    function createAction(name, implementation, obj) {\n      return (0, _actions2['default'])(this, 'global', name, implementation, obj);\n    }\n\n    return createAction;\n  }();\n\n  Alt.prototype.createActions = function () {\n    function createActions(ActionsClass) {\n      var _this3 = this;\n\n      var exportObj = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n      var actions = {};\n      var key = utils.uid(this._actionsRegistry, ActionsClass.displayName || ActionsClass.name || 'Unknown');\n\n      if (fn.isFunction(ActionsClass)) {\n        fn.assign(actions, utils.getPrototypeChain(ActionsClass));\n\n        var ActionsGenerator = function (_ActionsClass) {\n          _inherits(ActionsGenerator, _ActionsClass);\n\n          function ActionsGenerator() {\n            _classCallCheck(this, ActionsGenerator);\n\n            for (var _len5 = arguments.length, args = Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n              args[_key5] = arguments[_key5];\n            }\n\n            return _possibleConstructorReturn(this, _ActionsClass.call.apply(_ActionsClass, [this].concat(args)));\n          }\n\n          ActionsGenerator.prototype.generateActions = function () {\n            function generateActions() {\n              for (var _len6 = arguments.length, actionNames = Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n                actionNames[_key6] = arguments[_key6];\n              }\n\n              actionNames.forEach(function (actionName) {\n                actions[actionName] = utils.dispatchIdentity;\n              });\n            }\n\n            return generateActions;\n          }();\n\n          return ActionsGenerator;\n        }(ActionsClass);\n\n        for (var _len4 = arguments.length, argsForConstructor = Array(_len4 > 2 ? _len4 - 2 : 0), _key4 = 2; _key4 < _len4; _key4++) {\n          argsForConstructor[_key4 - 2] = arguments[_key4];\n        }\n\n        fn.assign(actions, new (Function.prototype.bind.apply(ActionsGenerator, [null].concat(argsForConstructor)))());\n      } else {\n        fn.assign(actions, ActionsClass);\n      }\n\n      this.actions[key] = this.actions[key] || {};\n      fn.eachObject(function (actionName, action) {\n        if (!fn.isFunction(action)) {\n          exportObj[actionName] = action;\n          return;\n        } // create the action\n\n\n        exportObj[actionName] = (0, _actions2['default'])(_this3, key, actionName, action, exportObj); // generate a constant\n\n        var constant = utils.formatAsConstant(actionName);\n        exportObj[constant] = exportObj[actionName].id;\n      }, [actions]);\n      return exportObj;\n    }\n\n    return createActions;\n  }();\n\n  Alt.prototype.takeSnapshot = function () {\n    function takeSnapshot() {\n      for (var _len7 = arguments.length, storeNames = Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n        storeNames[_key7] = arguments[_key7];\n      }\n\n      var state = StateFunctions.snapshot(this, storeNames);\n      fn.assign(this._lastSnapshot, state);\n      return this.serialize(state);\n    }\n\n    return takeSnapshot;\n  }();\n\n  Alt.prototype.rollback = function () {\n    function rollback() {\n      StateFunctions.setAppState(this, this.serialize(this._lastSnapshot), function (storeInst) {\n        storeInst.lifecycle('rollback');\n        storeInst.emitChange();\n      });\n    }\n\n    return rollback;\n  }();\n\n  Alt.prototype.recycle = function () {\n    function recycle() {\n      for (var _len8 = arguments.length, storeNames = Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {\n        storeNames[_key8] = arguments[_key8];\n      }\n\n      var initialSnapshot = storeNames.length ? StateFunctions.filterSnapshots(this, this._initSnapshot, storeNames) : this._initSnapshot;\n      StateFunctions.setAppState(this, this.serialize(initialSnapshot), function (storeInst) {\n        storeInst.lifecycle('init');\n        storeInst.emitChange();\n      });\n    }\n\n    return recycle;\n  }();\n\n  Alt.prototype.flush = function () {\n    function flush() {\n      var state = this.serialize(StateFunctions.snapshot(this));\n      this.recycle();\n      return state;\n    }\n\n    return flush;\n  }();\n\n  Alt.prototype.bootstrap = function () {\n    function bootstrap(data) {\n      StateFunctions.setAppState(this, data, function (storeInst, state) {\n        storeInst.lifecycle('bootstrap', state);\n        storeInst.emitChange();\n      });\n    }\n\n    return bootstrap;\n  }();\n\n  Alt.prototype.prepare = function () {\n    function prepare(storeInst, payload) {\n      var data = {};\n\n      if (!storeInst.displayName) {\n        throw new ReferenceError('Store provided does not have a name');\n      }\n\n      data[storeInst.displayName] = payload;\n      return this.serialize(data);\n    }\n\n    return prepare;\n  }(); // Instance type methods for injecting alt into your application as context\n\n\n  Alt.prototype.addActions = function () {\n    function addActions(name, ActionsClass) {\n      for (var _len9 = arguments.length, args = Array(_len9 > 2 ? _len9 - 2 : 0), _key9 = 2; _key9 < _len9; _key9++) {\n        args[_key9 - 2] = arguments[_key9];\n      }\n\n      this.actions[name] = Array.isArray(ActionsClass) ? this.generateActions.apply(this, ActionsClass) : this.createActions.apply(this, [ActionsClass].concat(args));\n    }\n\n    return addActions;\n  }();\n\n  Alt.prototype.addStore = function () {\n    function addStore(name, StoreModel) {\n      for (var _len10 = arguments.length, args = Array(_len10 > 2 ? _len10 - 2 : 0), _key10 = 2; _key10 < _len10; _key10++) {\n        args[_key10 - 2] = arguments[_key10];\n      }\n\n      this.createStore.apply(this, [StoreModel, name].concat(args));\n    }\n\n    return addStore;\n  }();\n\n  Alt.prototype.getActions = function () {\n    function getActions(name) {\n      return this.actions[name];\n    }\n\n    return getActions;\n  }();\n\n  Alt.prototype.getStore = function () {\n    function getStore(name) {\n      return this.stores[name];\n    }\n\n    return getStore;\n  }();\n\n  Alt.debug = function () {\n    function debug(name, alt, win) {\n      var key = 'alt.js.org';\n      var context = win;\n\n      if (!context && typeof window !== 'undefined') {\n        context = window;\n      }\n\n      if (typeof context !== 'undefined') {\n        context[key] = context[key] || [];\n        context[key].push({\n          name: name,\n          alt: alt\n        });\n      }\n\n      return alt;\n    }\n\n    return debug;\n  }();\n\n  return Alt;\n}();\n\nexports['default'] = Alt;\nmodule.exports = exports['default'];","map":{"version":3,"sources":["D:/Projects/W_e_e_b/my-app/node_modules/alt/lib/index.js"],"names":["Object","defineProperty","exports","value","_flux","require","_StateFunctions","StateFunctions","_interopRequireWildcard","_functions","fn","_store","store","_AltUtils","utils","_actions","_actions2","_interopRequireDefault","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","TypeError","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","_classCallCheck","instance","Constructor","Alt","config","arguments","length","undefined","serialize","JSON","stringify","deserialize","parse","dispatcher","Dispatcher","batchingFunction","callback","actions","global","stores","storeTransforms","trapAsync","_actionsRegistry","_initSnapshot","_lastSnapshot","dispatch","action","data","details","_this","id","Math","random","toString","substr","fsaDetails","type","namespace","name","fsa","payload","createUnsavedStore","StoreModel","displayName","createStoreConfig","Store","transformStore","_len","args","Array","_key","isFunction","createStoreFromClass","apply","concat","createStoreFromObject","createStore","iden","module","hot","warn","String","uid","_len2","_key2","storeInstance","saveInitialSnapshot","generateActions","_len3","actionNames","_key3","createActions","reduce","dispatchIdentity","createAction","implementation","ActionsClass","_this3","exportObj","assign","getPrototypeChain","ActionsGenerator","_ActionsClass","_len5","_key5","_len6","_key6","forEach","actionName","_len4","argsForConstructor","_key4","Function","bind","eachObject","constant","formatAsConstant","takeSnapshot","_len7","storeNames","_key7","state","snapshot","rollback","setAppState","storeInst","lifecycle","emitChange","recycle","_len8","_key8","initialSnapshot","filterSnapshots","flush","bootstrap","prepare","addActions","_len9","_key9","isArray","addStore","_len10","_key10","getActions","getStore","debug","alt","win","context","window","push"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;;AAIA,IAAIC,KAAK,GAAGC,OAAO,CAAC,MAAD,CAAnB;;AAEA,IAAIC,eAAe,GAAGD,OAAO,CAAC,wBAAD,CAA7B;;AAEA,IAAIE,cAAc,GAAGC,uBAAuB,CAACF,eAAD,CAA5C;;AAEA,IAAIG,UAAU,GAAGJ,OAAO,CAAC,aAAD,CAAxB;;AAEA,IAAIK,EAAE,GAAGF,uBAAuB,CAACC,UAAD,CAAhC;;AAEA,IAAIE,MAAM,GAAGN,OAAO,CAAC,SAAD,CAApB;;AAEA,IAAIO,KAAK,GAAGJ,uBAAuB,CAACG,MAAD,CAAnC;;AAEA,IAAIE,SAAS,GAAGR,OAAO,CAAC,kBAAD,CAAvB;;AAEA,IAAIS,KAAK,GAAGN,uBAAuB,CAACK,SAAD,CAAnC;;AAEA,IAAIE,QAAQ,GAAGV,OAAO,CAAC,WAAD,CAAtB;;AAEA,IAAIW,SAAS,GAAGC,sBAAsB,CAACF,QAAD,CAAtC;;AAEA,SAASE,sBAAT,CAAgCC,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AAAE,eAAWA;AAAb,GAArC;AAA0D;;AAEjG,SAASV,uBAAT,CAAiCU,GAAjC,EAAsC;AAAE,MAAIA,GAAG,IAAIA,GAAG,CAACC,UAAf,EAA2B;AAAE,WAAOD,GAAP;AAAa,GAA1C,MAAgD;AAAE,QAAIE,MAAM,GAAG,EAAb;;AAAiB,QAAIF,GAAG,IAAI,IAAX,EAAiB;AAAE,WAAK,IAAIG,GAAT,IAAgBH,GAAhB,EAAqB;AAAE,YAAIlB,MAAM,CAACsB,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCN,GAArC,EAA0CG,GAA1C,CAAJ,EAAoDD,MAAM,CAACC,GAAD,CAAN,GAAcH,GAAG,CAACG,GAAD,CAAjB;AAAyB;AAAE;;AAACD,IAAAA,MAAM,CAAC,SAAD,CAAN,GAAoBF,GAApB;AAAyB,WAAOE,MAAP;AAAgB;AAAE;;AAEhR,SAASK,0BAAT,CAAoCC,IAApC,EAA0CF,IAA1C,EAAgD;AAAE,MAAI,CAACE,IAAL,EAAW;AAAE,UAAM,IAAIC,cAAJ,CAAmB,2DAAnB,CAAN;AAAwF;;AAAC,SAAOH,IAAI,KAAK,OAAOA,IAAP,KAAgB,QAAhB,IAA4B,OAAOA,IAAP,KAAgB,UAAjD,CAAJ,GAAmEA,IAAnE,GAA0EE,IAAjF;AAAwF;;AAEhP,SAASE,SAAT,CAAmBC,QAAnB,EAA6BC,UAA7B,EAAyC;AAAE,MAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,UAAU,KAAK,IAAvD,EAA6D;AAAE,UAAM,IAAIC,SAAJ,CAAc,6DAA6D,OAAOD,UAAlF,CAAN;AAAsG;;AAACD,EAAAA,QAAQ,CAACP,SAAT,GAAqBtB,MAAM,CAACgC,MAAP,CAAcF,UAAU,IAAIA,UAAU,CAACR,SAAvC,EAAkD;AAAEW,IAAAA,WAAW,EAAE;AAAE9B,MAAAA,KAAK,EAAE0B,QAAT;AAAmBK,MAAAA,UAAU,EAAE,KAA/B;AAAsCC,MAAAA,QAAQ,EAAE,IAAhD;AAAsDC,MAAAA,YAAY,EAAE;AAApE;AAAf,GAAlD,CAArB;AAAqK,MAAIN,UAAJ,EAAgB9B,MAAM,CAACqC,cAAP,GAAwBrC,MAAM,CAACqC,cAAP,CAAsBR,QAAtB,EAAgCC,UAAhC,CAAxB,GAAsED,QAAQ,CAACS,SAAT,GAAqBR,UAA3F;AAAwG;;AAE9e,SAASS,eAAT,CAAyBC,QAAzB,EAAmCC,WAAnC,EAAgD;AAAE,MAAI,EAAED,QAAQ,YAAYC,WAAtB,CAAJ,EAAwC;AAAE,UAAM,IAAIV,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE;AAAC;;;AAG1J,IAAIW,GAAG,GAAG,YAAY;AACpB,WAASA,GAAT,GAAe;AACb,QAAIC,MAAM,GAAGC,SAAS,CAACC,MAAV,IAAoB,CAApB,IAAyBD,SAAS,CAAC,CAAD,CAAT,KAAiBE,SAA1C,GAAsD,EAAtD,GAA2DF,SAAS,CAAC,CAAD,CAAjF;;AAEAL,IAAAA,eAAe,CAAC,IAAD,EAAOG,GAAP,CAAf;;AAEA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKI,SAAL,GAAiBJ,MAAM,CAACI,SAAP,IAAoBC,IAAI,CAACC,SAA1C;AACA,SAAKC,WAAL,GAAmBP,MAAM,CAACO,WAAP,IAAsBF,IAAI,CAACG,KAA9C;AACA,SAAKC,UAAL,GAAkBT,MAAM,CAACS,UAAP,IAAqB,IAAIhD,KAAK,CAACiD,UAAV,EAAvC;;AACA,SAAKC,gBAAL,GAAwBX,MAAM,CAACW,gBAAP,IAA2B,UAAUC,QAAV,EAAoB;AACrE,aAAOA,QAAQ,EAAf;AACD,KAFD;;AAGA,SAAKC,OAAL,GAAe;AAAEC,MAAAA,MAAM,EAAE;AAAV,KAAf;AACA,SAAKC,MAAL,GAAc,EAAd;AACA,SAAKC,eAAL,GAAuBhB,MAAM,CAACgB,eAAP,IAA0B,EAAjD;AACA,SAAKC,SAAL,GAAiB,KAAjB;AACA,SAAKC,gBAAL,GAAwB,EAAxB;AACA,SAAKC,aAAL,GAAqB,EAArB;AACA,SAAKC,aAAL,GAAqB,EAArB;AACD;;AAEDrB,EAAAA,GAAG,CAACpB,SAAJ,CAAc0C,QAAd,GAAyB,YAAY;AACnC,aAASA,QAAT,CAAkBC,MAAlB,EAA0BC,IAA1B,EAAgCC,OAAhC,EAAyC;AACvC,UAAIC,KAAK,GAAG,IAAZ;;AAEA,WAAKd,gBAAL,CAAsB,YAAY;AAChC,YAAIe,EAAE,GAAGC,IAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2BC,MAA3B,CAAkC,CAAlC,EAAqC,EAArC,CAAT,CADgC,CAGhC;;AACA,YAAIR,MAAM,CAAC1C,cAAP,CAAsB,MAAtB,KAAiC0C,MAAM,CAAC1C,cAAP,CAAsB,SAAtB,CAArC,EAAuE;AACrE,cAAImD,UAAU,GAAG;AACfL,YAAAA,EAAE,EAAEJ,MAAM,CAACU,IADI;AAEfC,YAAAA,SAAS,EAAEX,MAAM,CAACU,IAFH;AAGfE,YAAAA,IAAI,EAAEZ,MAAM,CAACU;AAHE,WAAjB;AAKA,iBAAOP,KAAK,CAAChB,UAAN,CAAiBY,QAAjB,CAA0BlD,KAAK,CAACgE,GAAN,CAAUT,EAAV,EAAcJ,MAAM,CAACU,IAArB,EAA2BV,MAAM,CAACc,OAAlC,EAA2CL,UAA3C,CAA1B,CAAP;AACD;;AAED,YAAIT,MAAM,CAACI,EAAP,IAAaJ,MAAM,CAACD,QAAxB,EAAkC;AAChC,iBAAOlD,KAAK,CAACkD,QAAN,CAAeK,EAAf,EAAmBJ,MAAnB,EAA2BC,IAA3B,EAAiCE,KAAjC,CAAP;AACD;;AAED,eAAOA,KAAK,CAAChB,UAAN,CAAiBY,QAAjB,CAA0BlD,KAAK,CAACgE,GAAN,CAAUT,EAAV,EAAcJ,MAAd,EAAsBC,IAAtB,EAA4BC,OAA5B,CAA1B,CAAP;AACD,OAlBD;AAmBD;;AAED,WAAOH,QAAP;AACD,GA1BwB,EAAzB;;AA4BAtB,EAAAA,GAAG,CAACpB,SAAJ,CAAc0D,kBAAd,GAAmC,YAAY;AAC7C,aAASA,kBAAT,CAA4BC,UAA5B,EAAwC;AACtC,UAAI5D,GAAG,GAAG4D,UAAU,CAACC,WAAX,IAA0B,EAApC;AACAtE,MAAAA,KAAK,CAACuE,iBAAN,CAAwB,KAAKxC,MAA7B,EAAqCsC,UAArC;AACA,UAAIG,KAAK,GAAGxE,KAAK,CAACyE,cAAN,CAAqB,KAAK1B,eAA1B,EAA2CsB,UAA3C,CAAZ;;AAEA,WAAK,IAAIK,IAAI,GAAG1C,SAAS,CAACC,MAArB,EAA6B0C,IAAI,GAAGC,KAAK,CAACF,IAAI,GAAG,CAAP,GAAWA,IAAI,GAAG,CAAlB,GAAsB,CAAvB,CAAzC,EAAoEG,IAAI,GAAG,CAAhF,EAAmFA,IAAI,GAAGH,IAA1F,EAAgGG,IAAI,EAApG,EAAwG;AACtGF,QAAAA,IAAI,CAACE,IAAI,GAAG,CAAR,CAAJ,GAAiB7C,SAAS,CAAC6C,IAAD,CAA1B;AACD;;AAED,aAAO/E,EAAE,CAACgF,UAAH,CAAcN,KAAd,IAAuBxE,KAAK,CAAC+E,oBAAN,CAA2BC,KAA3B,CAAiChF,KAAjC,EAAwC,CAAC,IAAD,EAAOwE,KAAP,EAAc/D,GAAd,EAAmBwE,MAAnB,CAA0BN,IAA1B,CAAxC,CAAvB,GAAkG3E,KAAK,CAACkF,qBAAN,CAA4B,IAA5B,EAAkCV,KAAlC,EAAyC/D,GAAzC,CAAzG;AACD;;AAED,WAAO2D,kBAAP;AACD,GAdkC,EAAnC;;AAgBAtC,EAAAA,GAAG,CAACpB,SAAJ,CAAcyE,WAAd,GAA4B,YAAY;AACtC,aAASA,WAAT,CAAqBd,UAArB,EAAiCe,IAAjC,EAAuC;AACrC,UAAI3E,GAAG,GAAG2E,IAAI,IAAIf,UAAU,CAACC,WAAnB,IAAkCD,UAAU,CAACJ,IAA7C,IAAqD,EAA/D;AACAjE,MAAAA,KAAK,CAACuE,iBAAN,CAAwB,KAAKxC,MAA7B,EAAqCsC,UAArC;AACA,UAAIG,KAAK,GAAGxE,KAAK,CAACyE,cAAN,CAAqB,KAAK1B,eAA1B,EAA2CsB,UAA3C,CAAZ;AAEA;;AACA,UAAIgB,MAAM,CAACC,GAAX,EAAgB,OAAO,KAAKxC,MAAL,CAAYrC,GAAZ,CAAP;;AAEhB,UAAI,KAAKqC,MAAL,CAAYrC,GAAZ,KAAoB,CAACA,GAAzB,EAA8B;AAC5B,YAAI,KAAKqC,MAAL,CAAYrC,GAAZ,CAAJ,EAAsB;AACpBP,UAAAA,KAAK,CAACqF,IAAN,CAAW,mBAAmBC,MAAM,CAAC/E,GAAD,CAAzB,GAAiC,2CAAjC,GAA+E,4DAA1F;AACD,SAFD,MAEO;AACLP,UAAAA,KAAK,CAACqF,IAAN,CAAW,8BAAX;AACD;;AAED9E,QAAAA,GAAG,GAAGP,KAAK,CAACuF,GAAN,CAAU,KAAK3C,MAAf,EAAuBrC,GAAvB,CAAN;AACD;;AAED,WAAK,IAAIiF,KAAK,GAAG1D,SAAS,CAACC,MAAtB,EAA8B0C,IAAI,GAAGC,KAAK,CAACc,KAAK,GAAG,CAAR,GAAYA,KAAK,GAAG,CAApB,GAAwB,CAAzB,CAA1C,EAAuEC,KAAK,GAAG,CAApF,EAAuFA,KAAK,GAAGD,KAA/F,EAAsGC,KAAK,EAA3G,EAA+G;AAC7GhB,QAAAA,IAAI,CAACgB,KAAK,GAAG,CAAT,CAAJ,GAAkB3D,SAAS,CAAC2D,KAAD,CAA3B;AACD;;AAED,UAAIC,aAAa,GAAG9F,EAAE,CAACgF,UAAH,CAAcN,KAAd,IAAuBxE,KAAK,CAAC+E,oBAAN,CAA2BC,KAA3B,CAAiChF,KAAjC,EAAwC,CAAC,IAAD,EAAOwE,KAAP,EAAc/D,GAAd,EAAmBwE,MAAnB,CAA0BN,IAA1B,CAAxC,CAAvB,GAAkG3E,KAAK,CAACkF,qBAAN,CAA4B,IAA5B,EAAkCV,KAAlC,EAAyC/D,GAAzC,CAAtH;AAEA,WAAKqC,MAAL,CAAYrC,GAAZ,IAAmBmF,aAAnB;AACAjG,MAAAA,cAAc,CAACkG,mBAAf,CAAmC,IAAnC,EAAyCpF,GAAzC;AAEA,aAAOmF,aAAP;AACD;;AAED,WAAOT,WAAP;AACD,GAhC2B,EAA5B;;AAkCArD,EAAAA,GAAG,CAACpB,SAAJ,CAAcoF,eAAd,GAAgC,YAAY;AAC1C,aAASA,eAAT,GAA2B;AACzB,UAAIlD,OAAO,GAAG;AAAEqB,QAAAA,IAAI,EAAE;AAAR,OAAd;;AAEA,WAAK,IAAI8B,KAAK,GAAG/D,SAAS,CAACC,MAAtB,EAA8B+D,WAAW,GAAGpB,KAAK,CAACmB,KAAD,CAAjD,EAA0DE,KAAK,GAAG,CAAvE,EAA0EA,KAAK,GAAGF,KAAlF,EAAyFE,KAAK,EAA9F,EAAkG;AAChGD,QAAAA,WAAW,CAACC,KAAD,CAAX,GAAqBjE,SAAS,CAACiE,KAAD,CAA9B;AACD;;AAED,aAAO,KAAKC,aAAL,CAAmBF,WAAW,CAACG,MAAZ,CAAmB,UAAU7F,GAAV,EAAe+C,MAAf,EAAuB;AAClE/C,QAAAA,GAAG,CAAC+C,MAAD,CAAH,GAAcnD,KAAK,CAACkG,gBAApB;AACA,eAAO9F,GAAP;AACD,OAHyB,EAGvBsC,OAHuB,CAAnB,CAAP;AAID;;AAED,WAAOkD,eAAP;AACD,GAf+B,EAAhC;;AAiBAhE,EAAAA,GAAG,CAACpB,SAAJ,CAAc2F,YAAd,GAA6B,YAAY;AACvC,aAASA,YAAT,CAAsBpC,IAAtB,EAA4BqC,cAA5B,EAA4ChG,GAA5C,EAAiD;AAC/C,aAAO,CAAC,GAAGF,SAAS,CAAC,SAAD,CAAb,EAA0B,IAA1B,EAAgC,QAAhC,EAA0C6D,IAA1C,EAAgDqC,cAAhD,EAAgEhG,GAAhE,CAAP;AACD;;AAED,WAAO+F,YAAP;AACD,GAN4B,EAA7B;;AAQAvE,EAAAA,GAAG,CAACpB,SAAJ,CAAcwF,aAAd,GAA8B,YAAY;AACxC,aAASA,aAAT,CAAuBK,YAAvB,EAAqC;AACnC,UAAIC,MAAM,GAAG,IAAb;;AAEA,UAAIC,SAAS,GAAGzE,SAAS,CAACC,MAAV,IAAoB,CAApB,IAAyBD,SAAS,CAAC,CAAD,CAAT,KAAiBE,SAA1C,GAAsD,EAAtD,GAA2DF,SAAS,CAAC,CAAD,CAApF;AAEA,UAAIY,OAAO,GAAG,EAAd;AACA,UAAInC,GAAG,GAAGP,KAAK,CAACuF,GAAN,CAAU,KAAKxC,gBAAf,EAAiCsD,YAAY,CAACjC,WAAb,IAA4BiC,YAAY,CAACtC,IAAzC,IAAiD,SAAlF,CAAV;;AAEA,UAAInE,EAAE,CAACgF,UAAH,CAAcyB,YAAd,CAAJ,EAAiC;AAC/BzG,QAAAA,EAAE,CAAC4G,MAAH,CAAU9D,OAAV,EAAmB1C,KAAK,CAACyG,iBAAN,CAAwBJ,YAAxB,CAAnB;;AAEA,YAAIK,gBAAgB,GAAG,UAAUC,aAAV,EAAyB;AAC9C7F,UAAAA,SAAS,CAAC4F,gBAAD,EAAmBC,aAAnB,CAAT;;AAEA,mBAASD,gBAAT,GAA4B;AAC1BjF,YAAAA,eAAe,CAAC,IAAD,EAAOiF,gBAAP,CAAf;;AAEA,iBAAK,IAAIE,KAAK,GAAG9E,SAAS,CAACC,MAAtB,EAA8B0C,IAAI,GAAGC,KAAK,CAACkC,KAAD,CAA1C,EAAmDC,KAAK,GAAG,CAAhE,EAAmEA,KAAK,GAAGD,KAA3E,EAAkFC,KAAK,EAAvF,EAA2F;AACzFpC,cAAAA,IAAI,CAACoC,KAAD,CAAJ,GAAc/E,SAAS,CAAC+E,KAAD,CAAvB;AACD;;AAED,mBAAOlG,0BAA0B,CAAC,IAAD,EAAOgG,aAAa,CAACjG,IAAd,CAAmBoE,KAAnB,CAAyB6B,aAAzB,EAAwC,CAAC,IAAD,EAAO5B,MAAP,CAAcN,IAAd,CAAxC,CAAP,CAAjC;AACD;;AAEDiC,UAAAA,gBAAgB,CAAClG,SAAjB,CAA2BoF,eAA3B,GAA6C,YAAY;AACvD,qBAASA,eAAT,GAA2B;AACzB,mBAAK,IAAIkB,KAAK,GAAGhF,SAAS,CAACC,MAAtB,EAA8B+D,WAAW,GAAGpB,KAAK,CAACoC,KAAD,CAAjD,EAA0DC,KAAK,GAAG,CAAvE,EAA0EA,KAAK,GAAGD,KAAlF,EAAyFC,KAAK,EAA9F,EAAkG;AAChGjB,gBAAAA,WAAW,CAACiB,KAAD,CAAX,GAAqBjF,SAAS,CAACiF,KAAD,CAA9B;AACD;;AAEDjB,cAAAA,WAAW,CAACkB,OAAZ,CAAoB,UAAUC,UAAV,EAAsB;AACxCvE,gBAAAA,OAAO,CAACuE,UAAD,CAAP,GAAsBjH,KAAK,CAACkG,gBAA5B;AACD,eAFD;AAGD;;AAED,mBAAON,eAAP;AACD,WAZ4C,EAA7C;;AAcA,iBAAOc,gBAAP;AACD,SA5BsB,CA4BrBL,YA5BqB,CAAvB;;AA8BA,aAAK,IAAIa,KAAK,GAAGpF,SAAS,CAACC,MAAtB,EAA8BoF,kBAAkB,GAAGzC,KAAK,CAACwC,KAAK,GAAG,CAAR,GAAYA,KAAK,GAAG,CAApB,GAAwB,CAAzB,CAAxD,EAAqFE,KAAK,GAAG,CAAlG,EAAqGA,KAAK,GAAGF,KAA7G,EAAoHE,KAAK,EAAzH,EAA6H;AAC3HD,UAAAA,kBAAkB,CAACC,KAAK,GAAG,CAAT,CAAlB,GAAgCtF,SAAS,CAACsF,KAAD,CAAzC;AACD;;AAEDxH,QAAAA,EAAE,CAAC4G,MAAH,CAAU9D,OAAV,EAAmB,KAAK2E,QAAQ,CAAC7G,SAAT,CAAmB8G,IAAnB,CAAwBxC,KAAxB,CAA8B4B,gBAA9B,EAAgD,CAAC,IAAD,EAAO3B,MAAP,CAAcoC,kBAAd,CAAhD,CAAL,GAAnB;AACD,OAtCD,MAsCO;AACLvH,QAAAA,EAAE,CAAC4G,MAAH,CAAU9D,OAAV,EAAmB2D,YAAnB;AACD;;AAED,WAAK3D,OAAL,CAAanC,GAAb,IAAoB,KAAKmC,OAAL,CAAanC,GAAb,KAAqB,EAAzC;AAEAX,MAAAA,EAAE,CAAC2H,UAAH,CAAc,UAAUN,UAAV,EAAsB9D,MAAtB,EAA8B;AAC1C,YAAI,CAACvD,EAAE,CAACgF,UAAH,CAAczB,MAAd,CAAL,EAA4B;AAC1BoD,UAAAA,SAAS,CAACU,UAAD,CAAT,GAAwB9D,MAAxB;AACA;AACD,SAJyC,CAM1C;;;AACAoD,QAAAA,SAAS,CAACU,UAAD,CAAT,GAAwB,CAAC,GAAG/G,SAAS,CAAC,SAAD,CAAb,EAA0BoG,MAA1B,EAAkC/F,GAAlC,EAAuC0G,UAAvC,EAAmD9D,MAAnD,EAA2DoD,SAA3D,CAAxB,CAP0C,CAS1C;;AACA,YAAIiB,QAAQ,GAAGxH,KAAK,CAACyH,gBAAN,CAAuBR,UAAvB,CAAf;AACAV,QAAAA,SAAS,CAACiB,QAAD,CAAT,GAAsBjB,SAAS,CAACU,UAAD,CAAT,CAAsB1D,EAA5C;AACD,OAZD,EAYG,CAACb,OAAD,CAZH;AAcA,aAAO6D,SAAP;AACD;;AAED,WAAOP,aAAP;AACD,GAvE6B,EAA9B;;AAyEApE,EAAAA,GAAG,CAACpB,SAAJ,CAAckH,YAAd,GAA6B,YAAY;AACvC,aAASA,YAAT,GAAwB;AACtB,WAAK,IAAIC,KAAK,GAAG7F,SAAS,CAACC,MAAtB,EAA8B6F,UAAU,GAAGlD,KAAK,CAACiD,KAAD,CAAhD,EAAyDE,KAAK,GAAG,CAAtE,EAAyEA,KAAK,GAAGF,KAAjF,EAAwFE,KAAK,EAA7F,EAAiG;AAC/FD,QAAAA,UAAU,CAACC,KAAD,CAAV,GAAoB/F,SAAS,CAAC+F,KAAD,CAA7B;AACD;;AAED,UAAIC,KAAK,GAAGrI,cAAc,CAACsI,QAAf,CAAwB,IAAxB,EAA8BH,UAA9B,CAAZ;AACAhI,MAAAA,EAAE,CAAC4G,MAAH,CAAU,KAAKvD,aAAf,EAA8B6E,KAA9B;AACA,aAAO,KAAK7F,SAAL,CAAe6F,KAAf,CAAP;AACD;;AAED,WAAOJ,YAAP;AACD,GAZ4B,EAA7B;;AAcA9F,EAAAA,GAAG,CAACpB,SAAJ,CAAcwH,QAAd,GAAyB,YAAY;AACnC,aAASA,QAAT,GAAoB;AAClBvI,MAAAA,cAAc,CAACwI,WAAf,CAA2B,IAA3B,EAAiC,KAAKhG,SAAL,CAAe,KAAKgB,aAApB,CAAjC,EAAqE,UAAUiF,SAAV,EAAqB;AACxFA,QAAAA,SAAS,CAACC,SAAV,CAAoB,UAApB;AACAD,QAAAA,SAAS,CAACE,UAAV;AACD,OAHD;AAID;;AAED,WAAOJ,QAAP;AACD,GATwB,EAAzB;;AAWApG,EAAAA,GAAG,CAACpB,SAAJ,CAAc6H,OAAd,GAAwB,YAAY;AAClC,aAASA,OAAT,GAAmB;AACjB,WAAK,IAAIC,KAAK,GAAGxG,SAAS,CAACC,MAAtB,EAA8B6F,UAAU,GAAGlD,KAAK,CAAC4D,KAAD,CAAhD,EAAyDC,KAAK,GAAG,CAAtE,EAAyEA,KAAK,GAAGD,KAAjF,EAAwFC,KAAK,EAA7F,EAAiG;AAC/FX,QAAAA,UAAU,CAACW,KAAD,CAAV,GAAoBzG,SAAS,CAACyG,KAAD,CAA7B;AACD;;AAED,UAAIC,eAAe,GAAGZ,UAAU,CAAC7F,MAAX,GAAoBtC,cAAc,CAACgJ,eAAf,CAA+B,IAA/B,EAAqC,KAAKzF,aAA1C,EAAyD4E,UAAzD,CAApB,GAA2F,KAAK5E,aAAtH;AAEAvD,MAAAA,cAAc,CAACwI,WAAf,CAA2B,IAA3B,EAAiC,KAAKhG,SAAL,CAAeuG,eAAf,CAAjC,EAAkE,UAAUN,SAAV,EAAqB;AACrFA,QAAAA,SAAS,CAACC,SAAV,CAAoB,MAApB;AACAD,QAAAA,SAAS,CAACE,UAAV;AACD,OAHD;AAID;;AAED,WAAOC,OAAP;AACD,GAfuB,EAAxB;;AAiBAzG,EAAAA,GAAG,CAACpB,SAAJ,CAAckI,KAAd,GAAsB,YAAY;AAChC,aAASA,KAAT,GAAiB;AACf,UAAIZ,KAAK,GAAG,KAAK7F,SAAL,CAAexC,cAAc,CAACsI,QAAf,CAAwB,IAAxB,CAAf,CAAZ;AACA,WAAKM,OAAL;AACA,aAAOP,KAAP;AACD;;AAED,WAAOY,KAAP;AACD,GARqB,EAAtB;;AAUA9G,EAAAA,GAAG,CAACpB,SAAJ,CAAcmI,SAAd,GAA0B,YAAY;AACpC,aAASA,SAAT,CAAmBvF,IAAnB,EAAyB;AACvB3D,MAAAA,cAAc,CAACwI,WAAf,CAA2B,IAA3B,EAAiC7E,IAAjC,EAAuC,UAAU8E,SAAV,EAAqBJ,KAArB,EAA4B;AACjEI,QAAAA,SAAS,CAACC,SAAV,CAAoB,WAApB,EAAiCL,KAAjC;AACAI,QAAAA,SAAS,CAACE,UAAV;AACD,OAHD;AAID;;AAED,WAAOO,SAAP;AACD,GATyB,EAA1B;;AAWA/G,EAAAA,GAAG,CAACpB,SAAJ,CAAcoI,OAAd,GAAwB,YAAY;AAClC,aAASA,OAAT,CAAiBV,SAAjB,EAA4BjE,OAA5B,EAAqC;AACnC,UAAIb,IAAI,GAAG,EAAX;;AACA,UAAI,CAAC8E,SAAS,CAAC9D,WAAf,EAA4B;AAC1B,cAAM,IAAIvD,cAAJ,CAAmB,qCAAnB,CAAN;AACD;;AACDuC,MAAAA,IAAI,CAAC8E,SAAS,CAAC9D,WAAX,CAAJ,GAA8BH,OAA9B;AACA,aAAO,KAAKhC,SAAL,CAAemB,IAAf,CAAP;AACD;;AAED,WAAOwF,OAAP;AACD,GAXuB,EAAxB,CArQoB,CAkRpB;;;AAEAhH,EAAAA,GAAG,CAACpB,SAAJ,CAAcqI,UAAd,GAA2B,YAAY;AACrC,aAASA,UAAT,CAAoB9E,IAApB,EAA0BsC,YAA1B,EAAwC;AACtC,WAAK,IAAIyC,KAAK,GAAGhH,SAAS,CAACC,MAAtB,EAA8B0C,IAAI,GAAGC,KAAK,CAACoE,KAAK,GAAG,CAAR,GAAYA,KAAK,GAAG,CAApB,GAAwB,CAAzB,CAA1C,EAAuEC,KAAK,GAAG,CAApF,EAAuFA,KAAK,GAAGD,KAA/F,EAAsGC,KAAK,EAA3G,EAA+G;AAC7GtE,QAAAA,IAAI,CAACsE,KAAK,GAAG,CAAT,CAAJ,GAAkBjH,SAAS,CAACiH,KAAD,CAA3B;AACD;;AAED,WAAKrG,OAAL,CAAaqB,IAAb,IAAqBW,KAAK,CAACsE,OAAN,CAAc3C,YAAd,IAA8B,KAAKT,eAAL,CAAqBd,KAArB,CAA2B,IAA3B,EAAiCuB,YAAjC,CAA9B,GAA+E,KAAKL,aAAL,CAAmBlB,KAAnB,CAAyB,IAAzB,EAA+B,CAACuB,YAAD,EAAetB,MAAf,CAAsBN,IAAtB,CAA/B,CAApG;AACD;;AAED,WAAOoE,UAAP;AACD,GAV0B,EAA3B;;AAYAjH,EAAAA,GAAG,CAACpB,SAAJ,CAAcyI,QAAd,GAAyB,YAAY;AACnC,aAASA,QAAT,CAAkBlF,IAAlB,EAAwBI,UAAxB,EAAoC;AAClC,WAAK,IAAI+E,MAAM,GAAGpH,SAAS,CAACC,MAAvB,EAA+B0C,IAAI,GAAGC,KAAK,CAACwE,MAAM,GAAG,CAAT,GAAaA,MAAM,GAAG,CAAtB,GAA0B,CAA3B,CAA3C,EAA0EC,MAAM,GAAG,CAAxF,EAA2FA,MAAM,GAAGD,MAApG,EAA4GC,MAAM,EAAlH,EAAsH;AACpH1E,QAAAA,IAAI,CAAC0E,MAAM,GAAG,CAAV,CAAJ,GAAmBrH,SAAS,CAACqH,MAAD,CAA5B;AACD;;AAED,WAAKlE,WAAL,CAAiBH,KAAjB,CAAuB,IAAvB,EAA6B,CAACX,UAAD,EAAaJ,IAAb,EAAmBgB,MAAnB,CAA0BN,IAA1B,CAA7B;AACD;;AAED,WAAOwE,QAAP;AACD,GAVwB,EAAzB;;AAYArH,EAAAA,GAAG,CAACpB,SAAJ,CAAc4I,UAAd,GAA2B,YAAY;AACrC,aAASA,UAAT,CAAoBrF,IAApB,EAA0B;AACxB,aAAO,KAAKrB,OAAL,CAAaqB,IAAb,CAAP;AACD;;AAED,WAAOqF,UAAP;AACD,GAN0B,EAA3B;;AAQAxH,EAAAA,GAAG,CAACpB,SAAJ,CAAc6I,QAAd,GAAyB,YAAY;AACnC,aAASA,QAAT,CAAkBtF,IAAlB,EAAwB;AACtB,aAAO,KAAKnB,MAAL,CAAYmB,IAAZ,CAAP;AACD;;AAED,WAAOsF,QAAP;AACD,GANwB,EAAzB;;AAQAzH,EAAAA,GAAG,CAAC0H,KAAJ,GAAY,YAAY;AACtB,aAASA,KAAT,CAAevF,IAAf,EAAqBwF,GAArB,EAA0BC,GAA1B,EAA+B;AAC7B,UAAIjJ,GAAG,GAAG,YAAV;AACA,UAAIkJ,OAAO,GAAGD,GAAd;;AACA,UAAI,CAACC,OAAD,IAAY,OAAOC,MAAP,KAAkB,WAAlC,EAA+C;AAC7CD,QAAAA,OAAO,GAAGC,MAAV;AACD;;AACD,UAAI,OAAOD,OAAP,KAAmB,WAAvB,EAAoC;AAClCA,QAAAA,OAAO,CAAClJ,GAAD,CAAP,GAAekJ,OAAO,CAAClJ,GAAD,CAAP,IAAgB,EAA/B;AACAkJ,QAAAA,OAAO,CAAClJ,GAAD,CAAP,CAAaoJ,IAAb,CAAkB;AAAE5F,UAAAA,IAAI,EAAEA,IAAR;AAAcwF,UAAAA,GAAG,EAAEA;AAAnB,SAAlB;AACD;;AACD,aAAOA,GAAP;AACD;;AAED,WAAOD,KAAP;AACD,GAfW,EAAZ;;AAiBA,SAAO1H,GAAP;AACD,CA9US,EAAV;;AAgVAxC,OAAO,CAAC,SAAD,CAAP,GAAqBwC,GAArB;AACAuD,MAAM,CAAC/F,OAAP,GAAiBA,OAAO,CAAC,SAAD,CAAxB","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _flux = require('flux');\n\nvar _StateFunctions = require('./utils/StateFunctions');\n\nvar StateFunctions = _interopRequireWildcard(_StateFunctions);\n\nvar _functions = require('./functions');\n\nvar fn = _interopRequireWildcard(_functions);\n\nvar _store = require('./store');\n\nvar store = _interopRequireWildcard(_store);\n\nvar _AltUtils = require('./utils/AltUtils');\n\nvar utils = _interopRequireWildcard(_AltUtils);\n\nvar _actions = require('./actions');\n\nvar _actions2 = _interopRequireDefault(_actions);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } } /* global window */\n\n\nvar Alt = function () {\n  function Alt() {\n    var config = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    _classCallCheck(this, Alt);\n\n    this.config = config;\n    this.serialize = config.serialize || JSON.stringify;\n    this.deserialize = config.deserialize || JSON.parse;\n    this.dispatcher = config.dispatcher || new _flux.Dispatcher();\n    this.batchingFunction = config.batchingFunction || function (callback) {\n      return callback();\n    };\n    this.actions = { global: {} };\n    this.stores = {};\n    this.storeTransforms = config.storeTransforms || [];\n    this.trapAsync = false;\n    this._actionsRegistry = {};\n    this._initSnapshot = {};\n    this._lastSnapshot = {};\n  }\n\n  Alt.prototype.dispatch = function () {\n    function dispatch(action, data, details) {\n      var _this = this;\n\n      this.batchingFunction(function () {\n        var id = Math.random().toString(18).substr(2, 16);\n\n        // support straight dispatching of FSA-style actions\n        if (action.hasOwnProperty('type') && action.hasOwnProperty('payload')) {\n          var fsaDetails = {\n            id: action.type,\n            namespace: action.type,\n            name: action.type\n          };\n          return _this.dispatcher.dispatch(utils.fsa(id, action.type, action.payload, fsaDetails));\n        }\n\n        if (action.id && action.dispatch) {\n          return utils.dispatch(id, action, data, _this);\n        }\n\n        return _this.dispatcher.dispatch(utils.fsa(id, action, data, details));\n      });\n    }\n\n    return dispatch;\n  }();\n\n  Alt.prototype.createUnsavedStore = function () {\n    function createUnsavedStore(StoreModel) {\n      var key = StoreModel.displayName || '';\n      store.createStoreConfig(this.config, StoreModel);\n      var Store = store.transformStore(this.storeTransforms, StoreModel);\n\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      return fn.isFunction(Store) ? store.createStoreFromClass.apply(store, [this, Store, key].concat(args)) : store.createStoreFromObject(this, Store, key);\n    }\n\n    return createUnsavedStore;\n  }();\n\n  Alt.prototype.createStore = function () {\n    function createStore(StoreModel, iden) {\n      var key = iden || StoreModel.displayName || StoreModel.name || '';\n      store.createStoreConfig(this.config, StoreModel);\n      var Store = store.transformStore(this.storeTransforms, StoreModel);\n\n      /* istanbul ignore next */\n      if (module.hot) delete this.stores[key];\n\n      if (this.stores[key] || !key) {\n        if (this.stores[key]) {\n          utils.warn('A store named ' + String(key) + ' already exists, double check your store ' + 'names or pass in your own custom identifier for each store');\n        } else {\n          utils.warn('Store name was not specified');\n        }\n\n        key = utils.uid(this.stores, key);\n      }\n\n      for (var _len2 = arguments.length, args = Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n        args[_key2 - 2] = arguments[_key2];\n      }\n\n      var storeInstance = fn.isFunction(Store) ? store.createStoreFromClass.apply(store, [this, Store, key].concat(args)) : store.createStoreFromObject(this, Store, key);\n\n      this.stores[key] = storeInstance;\n      StateFunctions.saveInitialSnapshot(this, key);\n\n      return storeInstance;\n    }\n\n    return createStore;\n  }();\n\n  Alt.prototype.generateActions = function () {\n    function generateActions() {\n      var actions = { name: 'global' };\n\n      for (var _len3 = arguments.length, actionNames = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        actionNames[_key3] = arguments[_key3];\n      }\n\n      return this.createActions(actionNames.reduce(function (obj, action) {\n        obj[action] = utils.dispatchIdentity;\n        return obj;\n      }, actions));\n    }\n\n    return generateActions;\n  }();\n\n  Alt.prototype.createAction = function () {\n    function createAction(name, implementation, obj) {\n      return (0, _actions2['default'])(this, 'global', name, implementation, obj);\n    }\n\n    return createAction;\n  }();\n\n  Alt.prototype.createActions = function () {\n    function createActions(ActionsClass) {\n      var _this3 = this;\n\n      var exportObj = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      var actions = {};\n      var key = utils.uid(this._actionsRegistry, ActionsClass.displayName || ActionsClass.name || 'Unknown');\n\n      if (fn.isFunction(ActionsClass)) {\n        fn.assign(actions, utils.getPrototypeChain(ActionsClass));\n\n        var ActionsGenerator = function (_ActionsClass) {\n          _inherits(ActionsGenerator, _ActionsClass);\n\n          function ActionsGenerator() {\n            _classCallCheck(this, ActionsGenerator);\n\n            for (var _len5 = arguments.length, args = Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n              args[_key5] = arguments[_key5];\n            }\n\n            return _possibleConstructorReturn(this, _ActionsClass.call.apply(_ActionsClass, [this].concat(args)));\n          }\n\n          ActionsGenerator.prototype.generateActions = function () {\n            function generateActions() {\n              for (var _len6 = arguments.length, actionNames = Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n                actionNames[_key6] = arguments[_key6];\n              }\n\n              actionNames.forEach(function (actionName) {\n                actions[actionName] = utils.dispatchIdentity;\n              });\n            }\n\n            return generateActions;\n          }();\n\n          return ActionsGenerator;\n        }(ActionsClass);\n\n        for (var _len4 = arguments.length, argsForConstructor = Array(_len4 > 2 ? _len4 - 2 : 0), _key4 = 2; _key4 < _len4; _key4++) {\n          argsForConstructor[_key4 - 2] = arguments[_key4];\n        }\n\n        fn.assign(actions, new (Function.prototype.bind.apply(ActionsGenerator, [null].concat(argsForConstructor)))());\n      } else {\n        fn.assign(actions, ActionsClass);\n      }\n\n      this.actions[key] = this.actions[key] || {};\n\n      fn.eachObject(function (actionName, action) {\n        if (!fn.isFunction(action)) {\n          exportObj[actionName] = action;\n          return;\n        }\n\n        // create the action\n        exportObj[actionName] = (0, _actions2['default'])(_this3, key, actionName, action, exportObj);\n\n        // generate a constant\n        var constant = utils.formatAsConstant(actionName);\n        exportObj[constant] = exportObj[actionName].id;\n      }, [actions]);\n\n      return exportObj;\n    }\n\n    return createActions;\n  }();\n\n  Alt.prototype.takeSnapshot = function () {\n    function takeSnapshot() {\n      for (var _len7 = arguments.length, storeNames = Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n        storeNames[_key7] = arguments[_key7];\n      }\n\n      var state = StateFunctions.snapshot(this, storeNames);\n      fn.assign(this._lastSnapshot, state);\n      return this.serialize(state);\n    }\n\n    return takeSnapshot;\n  }();\n\n  Alt.prototype.rollback = function () {\n    function rollback() {\n      StateFunctions.setAppState(this, this.serialize(this._lastSnapshot), function (storeInst) {\n        storeInst.lifecycle('rollback');\n        storeInst.emitChange();\n      });\n    }\n\n    return rollback;\n  }();\n\n  Alt.prototype.recycle = function () {\n    function recycle() {\n      for (var _len8 = arguments.length, storeNames = Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {\n        storeNames[_key8] = arguments[_key8];\n      }\n\n      var initialSnapshot = storeNames.length ? StateFunctions.filterSnapshots(this, this._initSnapshot, storeNames) : this._initSnapshot;\n\n      StateFunctions.setAppState(this, this.serialize(initialSnapshot), function (storeInst) {\n        storeInst.lifecycle('init');\n        storeInst.emitChange();\n      });\n    }\n\n    return recycle;\n  }();\n\n  Alt.prototype.flush = function () {\n    function flush() {\n      var state = this.serialize(StateFunctions.snapshot(this));\n      this.recycle();\n      return state;\n    }\n\n    return flush;\n  }();\n\n  Alt.prototype.bootstrap = function () {\n    function bootstrap(data) {\n      StateFunctions.setAppState(this, data, function (storeInst, state) {\n        storeInst.lifecycle('bootstrap', state);\n        storeInst.emitChange();\n      });\n    }\n\n    return bootstrap;\n  }();\n\n  Alt.prototype.prepare = function () {\n    function prepare(storeInst, payload) {\n      var data = {};\n      if (!storeInst.displayName) {\n        throw new ReferenceError('Store provided does not have a name');\n      }\n      data[storeInst.displayName] = payload;\n      return this.serialize(data);\n    }\n\n    return prepare;\n  }();\n\n  // Instance type methods for injecting alt into your application as context\n\n  Alt.prototype.addActions = function () {\n    function addActions(name, ActionsClass) {\n      for (var _len9 = arguments.length, args = Array(_len9 > 2 ? _len9 - 2 : 0), _key9 = 2; _key9 < _len9; _key9++) {\n        args[_key9 - 2] = arguments[_key9];\n      }\n\n      this.actions[name] = Array.isArray(ActionsClass) ? this.generateActions.apply(this, ActionsClass) : this.createActions.apply(this, [ActionsClass].concat(args));\n    }\n\n    return addActions;\n  }();\n\n  Alt.prototype.addStore = function () {\n    function addStore(name, StoreModel) {\n      for (var _len10 = arguments.length, args = Array(_len10 > 2 ? _len10 - 2 : 0), _key10 = 2; _key10 < _len10; _key10++) {\n        args[_key10 - 2] = arguments[_key10];\n      }\n\n      this.createStore.apply(this, [StoreModel, name].concat(args));\n    }\n\n    return addStore;\n  }();\n\n  Alt.prototype.getActions = function () {\n    function getActions(name) {\n      return this.actions[name];\n    }\n\n    return getActions;\n  }();\n\n  Alt.prototype.getStore = function () {\n    function getStore(name) {\n      return this.stores[name];\n    }\n\n    return getStore;\n  }();\n\n  Alt.debug = function () {\n    function debug(name, alt, win) {\n      var key = 'alt.js.org';\n      var context = win;\n      if (!context && typeof window !== 'undefined') {\n        context = window;\n      }\n      if (typeof context !== 'undefined') {\n        context[key] = context[key] || [];\n        context[key].push({ name: name, alt: alt });\n      }\n      return alt;\n    }\n\n    return debug;\n  }();\n\n  return Alt;\n}();\n\nexports['default'] = Alt;\nmodule.exports = exports['default'];"]},"metadata":{},"sourceType":"script"}