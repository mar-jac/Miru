{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports['default'] = makeAction;\n\nvar _functions = require('../functions');\n\nvar fn = _interopRequireWildcard(_functions);\n\nvar _AltUtils = require('../utils/AltUtils');\n\nvar utils = _interopRequireWildcard(_AltUtils);\n\nvar _isPromise = require('is-promise');\n\nvar _isPromise2 = _interopRequireDefault(_isPromise);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj['default'] = obj;\n    return newObj;\n  }\n}\n\nfunction makeAction(alt, namespace, name, implementation, obj) {\n  var id = utils.uid(alt._actionsRegistry, String(namespace) + '.' + String(name));\n  alt._actionsRegistry[id] = 1;\n  var data = {\n    id: id,\n    namespace: namespace,\n    name: name\n  };\n\n  var dispatch = function dispatch(payload) {\n    return alt.dispatch(id, payload, data);\n  }; // the action itself\n\n\n  var action = function action() {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var invocationResult = implementation.apply(obj, args);\n    var actionResult = invocationResult; // async functions that return promises should not be dispatched\n\n    if (invocationResult !== undefined && !(0, _isPromise2['default'])(invocationResult)) {\n      if (fn.isFunction(invocationResult)) {\n        // inner function result should be returned as an action result\n        actionResult = invocationResult(dispatch, alt);\n      } else {\n        dispatch(invocationResult);\n      }\n    }\n\n    if (invocationResult === undefined) {\n      utils.warn('An action was called but nothing was dispatched');\n    }\n\n    return actionResult;\n  };\n\n  action.defer = function () {\n    for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return setTimeout(function () {\n      return action.apply(null, args);\n    });\n  };\n\n  action.id = id;\n  action.data = data; // ensure each reference is unique in the namespace\n\n  var container = alt.actions[namespace];\n  var namespaceId = utils.uid(container, name);\n  container[namespaceId] = action; // generate a constant\n\n  var constant = utils.formatAsConstant(namespaceId);\n  container[constant] = id;\n  return action;\n}\n\nmodule.exports = exports['default'];","map":{"version":3,"sources":["D:/Projects/W_e_e_b/my-app/node_modules/alt/lib/actions/index.js"],"names":["Object","defineProperty","exports","value","makeAction","_functions","require","fn","_interopRequireWildcard","_AltUtils","utils","_isPromise","_isPromise2","_interopRequireDefault","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","alt","namespace","name","implementation","id","uid","_actionsRegistry","String","data","dispatch","payload","action","_len","arguments","length","args","Array","_key","invocationResult","apply","actionResult","undefined","isFunction","warn","defer","_len2","_key2","setTimeout","container","actions","namespaceId","constant","formatAsConstant","module"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports['default'] = makeAction;\n\nvar _functions = require('../functions');\n\nvar fn = _interopRequireWildcard(_functions);\n\nvar _AltUtils = require('../utils/AltUtils');\n\nvar utils = _interopRequireWildcard(_AltUtils);\n\nvar _isPromise = require('is-promise');\n\nvar _isPromise2 = _interopRequireDefault(_isPromise);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction makeAction(alt, namespace, name, implementation, obj) {\n  var id = utils.uid(alt._actionsRegistry, String(namespace) + '.' + String(name));\n  alt._actionsRegistry[id] = 1;\n\n  var data = { id: id, namespace: namespace, name: name };\n\n  var dispatch = function dispatch(payload) {\n    return alt.dispatch(id, payload, data);\n  };\n\n  // the action itself\n  var action = function action() {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var invocationResult = implementation.apply(obj, args);\n    var actionResult = invocationResult;\n\n    // async functions that return promises should not be dispatched\n    if (invocationResult !== undefined && !(0, _isPromise2['default'])(invocationResult)) {\n      if (fn.isFunction(invocationResult)) {\n        // inner function result should be returned as an action result\n        actionResult = invocationResult(dispatch, alt);\n      } else {\n        dispatch(invocationResult);\n      }\n    }\n\n    if (invocationResult === undefined) {\n      utils.warn('An action was called but nothing was dispatched');\n    }\n\n    return actionResult;\n  };\n  action.defer = function () {\n    for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return setTimeout(function () {\n      return action.apply(null, args);\n    });\n  };\n  action.id = id;\n  action.data = data;\n\n  // ensure each reference is unique in the namespace\n  var container = alt.actions[namespace];\n  var namespaceId = utils.uid(container, name);\n  container[namespaceId] = action;\n\n  // generate a constant\n  var constant = utils.formatAsConstant(namespaceId);\n  container[constant] = id;\n\n  return action;\n}\nmodule.exports = exports['default'];"]},"metadata":{},"sourceType":"script"}